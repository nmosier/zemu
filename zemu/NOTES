
 * appvars must be less than 256^2 bytes
 * zork is 92K
 * need to be able to experiment with different page sizes -- this should be
   easily configurable at compile time.

Should make it so zemu need not be recompiled for different block sizes.


zmap format:
* header
* zpage table
  * zpapge table entry:
    * appvar name
    * start address
    * flags:
      * whether currently in RAM
      * perhaps some LRU info?

Environment variables:
ZPAGE_SIZE: default zpage size, used in all C programs, scripts, and assembly

Notes on conventions:
 - carry flag (C) indicates error on function return.

The Memory Map
 * Need AppVar for the call state & the user stack.
   (One can grow down; the other can grow up.)
 * Start out with 1024 for call state.
 * Ideas for quick caching
   - Remember address range of last page written to.
   - Swap out when out of mem.

The Save State
 * Contents of memory map.
 * Name of zmap (story file).
 * 